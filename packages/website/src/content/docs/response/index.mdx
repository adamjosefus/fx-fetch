---
title: Response
description: Constructors and utilities for handling HTTP responses
---

**Response** module provides constructors and utilities for managing immutable interpretations of HTTP responses.

## The Response Type

A `Response` represents immutable and clonable HTTP Response data. It is a base element of the Response module.

```ts twoslash showLineNumbers=false
import { Response } from 'fx-fetch';

type Type = Response.Response;
```

## The Input Type

A `Response.Input` represents all the possible inputs that can be used to create a `Response`.

Concrete types that make up the `Input` union:

```ts twoslash showLineNumbers=false
import { Response } from 'fx-fetch';

type Type = Response.Response.Input;
```

- `globalThis.Response` — vanilla JS response
- [`Response.Response.Parts`](#from-responseparts) — Object with response parts
- `Response.Response` — Existing Response can be used too

## Constructors

:::note
Making a `Response` manually makes sense when you need to mock responses in tests or create responses from scratch.
:::

### unsafeMake

Creates a `Response` from any of [`Response.Input`](#the-input-type).
Throws an `IllegalArgumentException` if the provided input is invalid.

```ts twoslash showLineNumbers=false
import { Response } from 'fx-fetch';

//       ┌─── Response.Response
//       ▼
const response = Response.unsafeMake({
  body: 'Hello, world!',
  status: 200,
});
```

### make

Similar to [unsafeMake](#unsafemake), but returns an [Option](https://effect.website/docs/data-types/option/) instead of throwing an error if the input is invalid.
If the input is invalid, it returns `None`. If valid, it returns `Some` containing the `Response`.

```ts twoslash showLineNumbers=false
import { Option } from 'effect';
import { Response } from 'fx-fetch';

//       ┌─── Option.Option<Response.Response>
//       ▼
const response = Response.make({
  body: 'Hello, world!',
  status: 200,
});
```

### from Response.Parts

For creating a `Response` from an object `Response.Parts` use same functions [`make`](#make) or [`unsafeMake`](#unsafemake).

The Parts type is super primitive. It's basically an object with all the properties of a JS response, but with better DX. 
Everything except the `url` is optional.

```ts twoslash showLineNumbers=false {5-8, 13}
import { Response } from 'fx-fetch';

const parts: Response.Response.Parts = {
  body: 'Hello, world!',
  headers: {
    'Content-Type': 'text/plain',
    'X-Custom-Header': ['CustomValue', 'AnotherValue'],
  },
  redirected: false,
  status: 200,
  statusText: 'OK',
  type: 'cors',
  url: 'https://example.com/api',
};

const response = Response.unsafeMake(parts);
```

Properties `url` and `headers` have flexible input types.

- `url` is of type `Url.Input`. Read more about it in [Url module documentation](../url/#the-input-type).
- `headers` can be almost anything what you can imagine as headers.
  - Record of strings
  - Entries (array of tuples)
  - `Map` of strings
  - Same as `HeadersInit` in Fetch API
  - _many more…_

---

## Errors

### NotOkError

A `NotOkError` represents an error that occurs when a `Response` has a [non-OK status code](https://developer.mozilla.org/en-US/docs/Web/API/Response/ok).

The error contains the following properties:
- `response` - The `Response` that caused the error.
- `reason` - A string indicating the category of the error based on the status code.
  - `'informational'` for status codes 100-199
  - `'redirection'` for status codes 300-399
  - `'client-error'` for status codes 400-499
  - `'server-error'` for status codes 500-599

```ts twoslash showLineNumbers=false
import { Response } from 'fx-fetch';

function fn(error: Response.NotOkError) {
  error.response; // ◀︎── Response.Response
  error.reason; // ◀︎── 'client-error' | 'informational' | 'redirection' | 'server-error'
}
```
