---
title: Fetch
description: Services and functions for performing HTTP requests.
---

**Fetch** module contains services and helpers for making HTTP requests.

## fetch

The `fetch` function is the most basic way to perform requests.

It takes a [`Request`](../request/) as input and returns an `Effect` with [`Response`](../response/).
Automatically handles errors such as network issues, request abortion, and non-OK HTTP responses.

```ts twoslash showLineNumbers=true {10, 18}
import { Effect } from 'effect';
import { Fetch, Request, Response } from 'fx-fetch';

//       ┌─── Effect.Effect<
//       │      void,
//       │      | Fetch.FetchError
//       │      | Fetch.AbortError
//       │      | Fetch.NotAllowedError
//       │      | Response.NotOkError,
//       │      Fetch.Fetch
//       │    >
//       ▼
const program = Effect.gen(function* () {
  const request = Request.unsafeMake({ url: './my-endpoint' });

  //       ┌─── Response.Response
  //       ▼
  const response = yield* Fetch.fetch(request); 
});
```

As you can see, using fetch will add a new requirement: `Fetch.Fetch`.
So to run programs that use `fetch`, you will need to provide an implementation of the `Fetch` service.


```ts twoslash showLineNumbers=true startLineNumber=20
import { Effect } from 'effect';
import { Fetch, Request, Response } from 'fx-fetch';

const program = Effect.gen(function* () {
  const request = Request.unsafeMake({ url: './my-endpoint' });
  const response = yield* Fetch.fetch(request); 
});
// ---cut---
program.pipe(
  Effect.provideService(Fetch.Fetch, Fetch.FetchLive),
  Effect.runFork // or Effect.runPromise etc.
);
```

Have an fetch as a service allows you to easily swap implementations for testing, mocking, or other purposes.

## fetchJson

The `fetchJson` function is a helper that combines `fetch` with [`Response.readJson`](../response/#readjson). It is syntactic sugar for better ergonomics.

```ts twoslash showLineNumbers=false {7, 16}
import { Effect } from 'effect';
import { Fetch, Request, Response } from 'fx-fetch';

//       ┌─── Effect.Effect<
//       │      void,
//       │      | Fetch.FetchError | Fetch.AbortError | Fetch.NotAllowedError | Response.NotOkError
//       │      | MalformedJsonError,
//       │      Fetch.Fetch
//       │    >
//       ▼
const program = Effect.gen(function* () {
  const request = Request.unsafeMake({ url: './my-endpoint' });

  //       ┌─── unknown
  //       ▼
  const payload = yield* Fetch.fetchJson(request);
});
```

## fetchText
The `fetchText` function is a helper that combines [`fetch`](#fetch) with [`Response.readText`](../response/#readtext).
It is similar to [`fetchJson`](#fetchjson), but reads text.



## fetchJsonWithSchema
The `fetchJsonWithSchema` function is another helper that combines [`fetch`](#fetch) with [`Response.readJsonWithSchema`](../response/#readjsonwithschema). It allows you to validate the payload against a [Effect Schema](https://effect.website/docs/schema/introduction/).

```ts twoslash showLineNumbers=false {12, 13, 22}
import { Effect, Schema } from 'effect';
import { Fetch, Request, Response } from 'fx-fetch';

const UserSchema = Schema.Struct({
  id: Schema.Int,
  name: Schema.String,
});

//       ┌─── Effect.Effect<
//       │      void,
//       │      | Fetch.FetchError | Fetch.AbortError | Fetch.NotAllowedError | Response.NotOkError
//       │      | MalformedJsonError
//       │      | ParseError,
//       │      Fetch.Fetch
//       │    >
//       ▼
const program = Effect.gen(function* () {
  const request = Request.unsafeMake({ url: './my-endpoint' });

  //       ┌─── typeof UserSchema.Type
  //       ▼
  const payload = yield* Fetch.fetchJsonWithSchema(request, UserSchema);
});
```